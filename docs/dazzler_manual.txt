CROMEMCO DAZZLER MANUAL
=======================
U.S. Patent No. 4121283
Copyright 1978 Cromemco, Inc.

TECHNICAL INFORMATION
=====================

Introduction
------------
The TV DAZZLER color graphics module provides a general purpose interface
between your computer and your color TV. The DAZZLER can be used to generate
games, animated displays, educational learning drills or even light shows,
all in full color.

The DAZZLER is built on two boards designed to plug directly into any computer
using the S-100 microcomputer bus. The video output of the DAZZLER can be
connected directly to the video input of a color TV set.

Design
------
The DAZZLER interface is a very advanced design using over 70 MOS and TTL
integrated circuits on two printed boards. The two DAZZLER boards may be
plugged directly into two adjacent slots in your computer. A 16-conductor
ribbon cable, with DIP plugs on each end, is used to interconnect the two boards.

Operation
---------
The DAZZLER interface uses high-speed direct memory access (DMA) to read the
memory of the host computer and translates the information in the memory into
a color TV signal. The key advantage of using DMA is that the DAZZLER can
display a picture while at the same time the computer is executing either a
related or unrelated program. Only a 15% slow-down of the computer execution
is realized during the DAZZLER operation.

Functional Block Diagram
------------------------
A 3.579545 MHz crystal oscillator is used to generate the color video
subcarrier. The video output amplifier delivers a standard 1V negative sync
composite video signal into a 52 ohm load. A six-foot length of 52 ohm coax
cable is supplied with every DAZZLER.

While the video output signal is generated by Board 1, Board 2 is used to
communicate with the computer. A high speed (one million bytes per second)
DMA controller is the heart of this board. The controller issues a "Hold"
command when it is ready to access the computer memory. When the computer
finishes the current machine cycle it issues a "Hold Acknowledge" signal to
begin DMA.

In addition to the high-speed DMA data link, two output ports and one input
port are built into DAZZLER Board 2 for the exchange of control signals
between the computer and DAZZLER. These are output ports 0EH and 0FH and
input port 0EH.

OUTPUT PORT 0EH (14)
====================
The most significant bit of output port 0EH is used to enable or disable
the DAZZLER. A "1" at this bit location turns the DAZZLER on. A "0" turns
the DAZZLER off. The DAZZLER can also be turned off manually by depressing
the "clear" switch on the computer front panel.

The remaining seven bits of output port 0EH are used to set the starting
location of the picture to be displayed in the computer's memory. As will
be discussed below, the picture may require 512 bytes of memory or 2K bytes
of memory depending on the mode in which the DAZZLER is operating. In any
event, this must be static memory with an access time of 1 microsecond or
faster.

Bit layout for Output Port 0EH:
  MSB                                          LSB
  +----+-----+-----+-----+-----+-----+-----+-----+
  |ON/ | A15 | A14 | A13 | A12 | A11 | A10 | A9  |
  |OFF |     |     |     |     |     |     |     |
  +----+-----+-----+-----+-----+-----+-----+-----+
       STARTING ADDRESS OF PICTURE

The low 7 bits (A9-A15) are left-shifted 1 bit to form the high byte of the
picture buffer address. This means the picture buffer must start on a
512-byte boundary.

OUTPUT PORT 0FH (15)
====================
Output port 0FH is used to set the format of the TV picture. The function
of each of the eight bits of this output port is shown in this table:

  D7 - Not used
  D6=1 - Resolution X4 (64x64 for 512 bytes, 128x128 for 2K bytes)
  D6=0 - Normal resolution (32x32 for 512 bytes, 64x64 for 2K bytes)
         Color and intensity of each picture element set by 4-bit words
         in the computer memory.
  D5=1 - Picture in 2K bytes of memory
  D5=0 - Picture in 512 bytes of memory
  D4=0 - Black-and-White picture
  D4=1 - Color picture
  D3=1 - High intensity color (In resolution X4 black-and-white mode, D3 is
         the most significant bit of 4-bit intensity control word)
  D3=0 - Low intensity color
  D2=1 - Blue
  D2=0 - No blue
  D1=1 - Green
  D1=0 - No green
  D0=1 - Red
  D0=0 - No red

Note: Bit D0 is the least significant bit.

In resolution X4 mode, D3-D0 are used to set the color of a color picture
or the intensity of a black-and-white picture. Bits D3-D0 are not used in
normal resolution mode.

INPUT PORT 0EH (14)
===================
Only two bits of input port 0EH are used:
  D7 - ODD LINE/EVEN LINE: Low during odd lines, high during even lines
  D6 - END OF FRAME: Goes low for 4ms between frames to indicate end of frame

  +----+----+
  | D7 | D6 |
  +----+----+
  |ODD/|END |
  |EVEN|OF  |
  |LINE|FRAME|
  +----+----+
  Only Two Bits of Input Port are Used.

DISPLAY MODES SUMMARY
=====================

Normal Resolution Mode (D6=0):
- 4 bits of computer memory code each element of the picture
- 32x32 picture requires 512 bytes of memory
- 64x64 picture requires 2K bytes of memory
- In color mode: D0=Red, D1=Green, D2=Blue, D3=Intensity
- In black-and-white mode: 4 bits specify one of 16 levels of grey

4-bit color encoding (Normal Resolution):
  LSB                           MSB
  +-----+-------+------+-------+-------+-------+------+-------+
  | RED | GREEN | BLUE | HI/LO | RED   | GREEN | BLUE | HI/LO |
  +-----+-------+------+-------+-------+-------+------+-------+
  ONE PICTURE ELEMENT            ADJACENT ELEMENT

  In Normal Resolution Mode One Byte of Memory is Used to
  Represent Two Adjacent Elements of the Picture.

Resolution X4 Mode (D6=1):
- Each bit of memory turns on or off a single element of the picture
- 64x64 picture for 512 bytes
- 128x128 picture for 2K bytes
- Color/intensity is set globally by bits D0-D3 of output port 0FH
- For full color in X4 mode, multiple frames of different colors must be
  interleaved

Pixel layout for X4 mode:
  +-----+-----+-----+-----+
  | LSB | D1  | D4  | D5  |
  | D0  |     |     |     |
  +-----+-----+-----+-----+
  | D2  | D3  | D6  | D7  |
  |     |     |     | MSB |
  +-----+-----+-----+-----+

  In Resolution X4 Mode One Byte of Memory is Used to
  Represent Eight Adjacent Elements of the Picture.

MEMORY MAP OF DAZZLER PICTURE
=============================
The 2K byte DAZZLER picture is stored in memory as four quadrants. Each
quadrant of the picture occupies one 512-byte page of memory. Only one page
of memory is displayed for a 512-byte picture.

Memory scanning sequence for 2K byte picture:
  +--------+--------+
  |   0    |  512   |
  | to 15  | to 527 |
  +--------+--------+
  |   16   |  528   |
  | to 511 |to 1023 |
  +--------+--------+
  | 1024   | 1536   |
  |to 1535 |to 2047 |
  +--------+--------+

First Quadrant is Displayed for 512-Byte Picture.
All Four Memory Quadrants are Displayed in 2K-Byte Picture.

TEST PROGRAM
============
The following program is useful for testing the operation of the DAZZLER
and is useful for initial tune-up. To operate this program you must have
at least 2K bytes of memory beginning at location zero in memory.

ADDR  OBJECT    MNEMONICS       COMMENTS
----  ------    ---------       --------
0000  3E80      TEST: LD A,80H  ;10000000B TO REG. A
0002  D30E            OUT 0EH,A ;OUTPUT TO PORT 0E
0004  DBFF            IN A,0FFH ;INPUT FROM SENSE SWITCHES
0006  D30F            OUT 0FH,A ;OUTPUT TO PORT 0F
0008  C30000          JP TEST   ;REPEAT

This program begins by putting the bit sequence "10000000" into the
accumulator and outputting it to port 0EH. This turns the DAZZLER on and
tells it that the picture to display begins at location zero in memory.
Next the program uses the front panel sense switches to set the control
word sent to output port 0FH. This allows the user to experiment with
different output formats and appreciate the fantastic versatility of the
DAZZLER display. When sense switch A12 is raised the DAZZLER goes into
color mode, and a colorful quilt-like pattern will appear on the TV screen.

USING TWO DAZZLERS IN YOUR COMPUTER
===================================
If you wish to control two TV sets simultaneously, you can use two DAZZLERs
in your computer at the same time. To synchronize the DAZZLERs, remove the
jumper wire connecting "SYNC IN" to "G" on Board 1 of one of the DAZZLERs.
Now connect "SYNC OUT" from the other DAZZLER to the SYNC IN pad that used
to be connected to "G". The two DAZZLERs are synchronized with this
connection so that they may be operated simultaneously in the same computer.

TIMING INFORMATION
==================
- Frame rate: Standard NTSC (approximately 60 Hz)
- D6 (End of Frame) goes low for 4ms between frames
- D7 toggles between odd and even scan lines
- Crystal frequency: 3.579545 MHz (color subcarrier)

PORT ADDRESS SUMMARY
====================
Default ports (directly from manual):
  Output Port 0EH (14 decimal) - Control/Address
  Output Port 0FH (15 decimal) - Format
  Input Port 0EH (14 decimal)  - Status

Note: Port addresses can be changed via jumper wires on Board 2.
The seven port selection jumper wires should connect pad J1 to J1,
J2 to J2, J3 to J3, etc.

PARTS LIST - INTEGRATED CIRCUITS
================================

BOARD 1:
IC1   7805      IC14-15  7400     IC28  74175
IC2   7410      IC16-18  7410     IC29  7400
IC3   7473      IC19     7404     IC30  7420
IC4   7432      IC20     7420     IC31  7473
IC5   7430      IC21     7432     IC32-33 74161
IC6   7474      IC22     7408     IC34  74157
IC7   74LS04    IC23     7474     IC35  74175
IC8   7408      IC24     3417     IC36  7404
IC9   7400      IC25     7408     IC37  74LS75
IC10  7473      IC26     74151
IC11-12 7493    IC27     74157
IC13  74157

BOARD 2:
IC38  7805      IC50-51  7493     IC62  7483
IC39  7402      IC52     7408     IC63  7475
IC40  7408      IC53     7493     IC64  74LS04
IC41  7404      IC54     7475     IC65-66 7405
IC42  74LS10    IC55     74175    IC67-70 74367
IC43-44 7474    IC56     74LS32   IC71-72 74LS04
IC45  74LS30    IC57     7495     IC73  7405
IC46  74157     IC58-59  74LS04   IC74  7474
IC47  74175     IC60     7483
IC48  74LS08    IC61     7475
IC49  7404
